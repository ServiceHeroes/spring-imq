language: java
install: true
jdk: oraclejdk8
addons:
  sonarcloud:
    organization: "levry-github"
    token:
      secure: dIiSEFDK7iJQV6WnsZvmUlODjjBhfn8OFwmCUIVhat4nf0I02Wn4+M8xp5+QfJeed/GBTISUn209jmyKN4rOmzgnyx1KNFVXr8mBt7Ky7O1mW+DdCYY/7zkJm7KW733Gai1G5ziVnM2g/XWFpTUkRY+fwxsI8MmpcFOom10ydrGdWhHbtErcsKRSdR8J6upaufyQjEZul2r8P0FKHOa1zOU7sOVlOOuHc5loWu11SRqmXTEWWyhqJv9PyxAIdOVRQhXJeJkSr3d7XUrnmH3mC6BgE1MZ1JnnktQ2kKFp5moYHwgexeQBCNk2cpj3eVha1Jf7hod7oVrKMssZs+kX0toiFNJqJwAiZ4AveGbMtnzHFUCRDBovN1dTb9cPqp/rD6XCWkCn2jLdfiftGGQPVvlgeJB0sJbuDcxisPBkRWNR91gCMbqhOyotR2Xk2s5DTX8re3fDXzrHD+KM7XQiZMDqOb+MQWlmV6z0F46YuBuUuM+GxUL6oJ/sOCztYyorxjLrrZwsJZBy4mzyPRqaRJ7eINlBs/2h5VZObpH6vkgRZCJvLliWbLCqDQ5IzY+Cxm2H0YkBl81JHYNG44q+uvn64hDk1GQQGgtT9d2L4UHGfifZb8NtmYN1ix97qnyhhEu38DRzMATCnaZmtb0R13jfdeSf7OYoHiRc+MgnsDY=
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.sonar/cache
before_install:
  - chmod +x gradlew
script:
  - ./gradlew :imq-spring-boot-starter:check --console=plain
  - ./gradlew :imq-spring-boot-starter:jacocoTestReport --console=plain
  - ./gradlew :imq-spring-boot-starter:sonarqube --console=plain
branches:
  only:
  - master
  - develop